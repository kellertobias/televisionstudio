$screen-width: 1024px;
$screen-height: 600px;
$grid-columns: 8 * 3;
$grid-rows: 24;
$outer: 12px;
$inner: 3px;
$border-width: 1px;
$border-shadow: 1px;
$border-shadow-strengt: 0.5;
$screen-inner-width: $screen-width - 2 * $outer;
$screen-inner-height: $screen-height - 2 * $outer;
$gap: $inner;
$grid-width: ($screen-inner-width + 2 * $gap) / $grid-columns;
$grid-height: ($screen-inner-height + 2 * $gap) / $grid-rows;

@function col-width($i) {
  @return $i * $grid-width - 2 * $gap;
}

@function col-height($i) {
  @return $i * $grid-height - 2 * $gap;
}

@function x-pos($i) {
  @return col-width($i) + 2 * $gap;
}

@function y-pos($i) {
  @return col-height($i) + 2 * $gap;
}

html,
body {
  background: #060606;
  margin: 0;
  padding: 0;
  color: #fff;
  font-family: Roboto, Arial, Sans;
  font-size: 12pt;
  height: 100vh;
  width: 100vw;
  line-height: 1.15;
  overflow: hidden;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  -ms-overflow-style: scrollbar;
  -webkit-tap-highlight-color: transparent;
}

article,
aside,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section {
  display: block;
}

body {
  margin: 0;
  font-weight: 400;
  line-height: 1.5;
  text-align: left;
}

[tabindex="-1"]:focus {
  outline: 0 !important;
}

hr {
  box-sizing: content-box;
  height: 0;
  overflow: visible;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  margin: 0;
  line-height: 1.15;
}

p {
  margin-top: 0;
  margin-bottom: 1rem;
}

*,
::after,
::before {
  box-sizing: border-box;
  text-size-adjust: 100%;
}

b,
strong {
  font-weight: bolder;
}

small {
  font-size: 80%;
}

sub,
sup {
  position: relative;
  font-size: 75%;
  line-height: 0;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

a {
  color: #007bff;
  text-decoration: none;
  background-color: transparent;
  -webkit-text-decoration-skip: objects;
}

a:hover {
  color: #0056b3;
  text-decoration: underline;
}

a:not([href]):not([tabindex]) {
  color: inherit;
  text-decoration: none;
}

a:not([href]):not([tabindex]):focus,
a:not([href]):not([tabindex]):hover {
  color: inherit;
  text-decoration: none;
}

a:not([href]):not([tabindex]):focus {
  outline: 0;
}

code,
kbd,
pre,
samp {
  font-family: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
    "Courier New", monospace;
  font-size: 1em;
}

pre {
  margin-top: 0;
  margin-bottom: 1rem;
  overflow: auto;
  -ms-overflow-style: scrollbar;
}

figure {
  margin: 0 0 1rem;
}

img {
  vertical-align: middle;
  border-style: none;
}

svg {
  overflow: hidden;
  vertical-align: middle;
}

table {
  border-collapse: collapse;
}

caption {
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
  color: #6c757d;
  text-align: left;
  caption-side: bottom;
}

th {
  text-align: inherit;
}

label {
  display: inline-block;
  margin-bottom: 0.5rem;
}

button {
  border-radius: 0;
}

button:focus {
  outline: 1px dotted;
  outline: 5px auto -webkit-focus-ring-color;
}

button,
input,
optgroup,
select,
textarea {
  margin: 0;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
}

button,
input {
  overflow: visible;
}

button,
select {
  text-transform: none;
}

[type="reset"],
[type="submit"],
button,
html [type="button"] {
  -webkit-appearance: button;
}

[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner,
button::-moz-focus-inner {
  padding: 0;
  border-style: none;
}

input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  padding: 0;
}

input[type="date"],
input[type="datetime-local"],
input[type="month"],
input[type="time"] {
  -webkit-appearance: listbox;
}

textarea {
  overflow: auto;
  resize: vertical;
}

fieldset {
  min-width: 0;
  padding: 0;
  margin: 0;
  border: 0;
}

legend {
  display: block;
  width: 100%;
  max-width: 100%;
  padding: 0;
  margin-bottom: 0.5rem;
  font-size: 1.5rem;
  line-height: inherit;
  color: inherit;
  white-space: normal;
}

.desk-body {
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center; /* vertical */
  justify-content: center; /* horizontal */

  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Old versions of Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none; /* Non-prefixed version, currently
                                supported by Chrome, Edge, Opera and Firefox */
}

.desk {
  position: relative;
  width: 1024px;
  height: 600px;
  outline: 1px solid rgba(255, 255, 255, 0.2);
  font-size: 12px;
  h2 {
    margin-top: 0;
    font-size: 15px;
  }

  h3 {
    font-size: 13px;
    padding-top: 2px;
    padding-bottom: 2px;
  }
}

.frame {
  left: $outer;
  right: $outer;
  top: $outer;
  bottom: $outer;
  position: absolute;
}

.window {
  border: $border-width solid #aaa;
  border-radius: 7px;
  position: relative;
  height: 100%;
  background-color: #000;
  box-shadow: 0 0 $border-shadow $border-shadow
    rgba(#aaa, $border-shadow-strengt);

  .window-content {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
  }

  .window-title {
    border-top-left-radius: 5px;
    border-top-right-radius: 5px;
    height: 30px;
    overflow: hidden;
    background-color: rgba(#aaa, 0.3);
    padding: 4px 8px;
    font-size: 15px;
    font-weight: bolder;
    text-align: center;
  }

  &.window-titled-compact {
    .window-title {
      height: 20px;
      padding: 0px;
      line-height: 1.3em;
    }
    &.window-titled .window-content {
      top: 20px;
    }
  }

  &.window-titled {
    .window-content {
      top: 30px;
    }
  }

  &.window-padded .window-content {
    padding: 5px 7px;
  }

  .micro-title {
    font-size: 11px;
    line-height: 1em;
    position: absolute;
    margin-top: 2px;
    font-weight: bolder;
    left: 0;
    right: 0;
    top: 0;
  }

  &.modal-window {
    height: initial;
    width: initial;
    z-index: 199;
    position: absolute;
    top: 80px;
    bottom: 40px;
    right: 40px;
    left: 40px;

    .window-content {
      top: 42px;

      .scroll-container {
        padding: 10px 27px;
        overflow: hidden;
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
      }
    }

    .window-title {
      height: 42px;
      line-height: 40px;
      padding: 0;
    }
  }
}

.modal-close {
  position: absolute;
  right: 2px;
  top: 2px;

  .desk-button {
    margin: 1px;
    line-height: 1em;
    padding: 0;
    padding-left: 11px;
    padding-right: 10px;
    padding-top: 7px;
    padding-bottom: 8px;

    .svg-inline--fa {
      font-size: 1.5em;
    }
  }
}

.modal-menu {
  position: absolute;
  bottom: 2px;
  right: 2px;
  display: flex;
  flex-direction: row;

  .desk-button {
    margin: 2px;
    line-height: 38px;
    padding: 0 15px;
    font-size: 14px;
  }
}

.desk-button {
  border: 1px solid #fff;
  background-color: rgba(#fff, 0.2);
  border-radius: 5px;
  padding: 0 7px;
  margin: 4px;
  font-size: 12px;
  line-height: 30px;
  cursor: pointer;

  &.desk-button-disabled {
    cursor: default;
  }
}

.desk-button-main-row {
  margin: 0;
  position: absolute;
  left: 2px;
  right: 2px;
  bottom: 2px;
  .desk-button {
    margin: 2px;
  }
}

.desk-button-mini-row {
  margin: 0;
  position: absolute;
  right: 2px;
  bottom: 2px;
  .desk-button {
    font-size: 12px;
    line-height: 1em;
    padding: 3px;
    margin: 0;
  }
}

.desk-button-secondary {
  position: absolute;
  top: 2px;
  bottom: 2px;
  right: 2px;
  padding: 2px;
  display: flex;

  .desk-button {
    height: 100%;
    margin: 0 1.5px;
    padding: 0 20px;
    font-size: 1.5em;
    line-height: 53px;
  }
}

.scroll-container {
  height: 100%;
  overflow-x: hidden;
  overflow-y: scroll;

  &::-webkit-scrollbar {
    width: 30px;
    border: 2px solid black;
  }

  /* Track */
  &::-webkit-scrollbar-track {
    background-color: transparent;
  }

  /* Handle */
  &::-webkit-scrollbar-thumb {
    background-color: rgba(#fff, 0.3);
    border: 1px solid black;
    border-radius: 5px;
  }

  /* Handle on hover */
  &::-webkit-scrollbar-thumb:hover {
    background: #555;
  }

  &::-webkit-scrollbar-button {
    display: inline;
  }
}

@mixin gen-window($name, $color) {
  .button-#{$name} {
    border: 1px solid $color;
    background-color: rgba($color, 0.5);

    &:hover {
      border: 1px solid $color;
      background-color: rgba($color, 0.7);
    }
  }

  .window-#{$name} {
    &,
    .window {
      border-color: $color;
      box-shadow: 0 0 $border-shadow $border-shadow
        rgba($color, $border-shadow-strengt);
    }
    .window-title {
      background-color: rgba($color, 0.3);
      border-bottom: 1px solid rgba($color, 0.5);
    }

    .desk-button {
      border: 1px solid $color;
      background-color: rgba($color, 0.5);
      cursor: pointer;

      &:hover {
        border: 1px solid $color;
        background-color: rgba($color, 0.7);
      }
    }

    .scroll-container {
      /* Handle */
      &::-webkit-scrollbar-thumb {
        background-color: rgba($color, 0.5);
        margin: 3px;
        padding: 5px;
      }

      /* Handle on hover */
      &::-webkit-scrollbar-thumb:hover {
        background-color: rgba($color, 0.7);
      }
    }
  }
}

$orange: #ff7000;

@include gen-window("orange", $orange);
@include gen-window("purple", #7700ff);
@include gen-window("blue", #0000ff);
@include gen-window("pink", #ff0077);
@include gen-window("red", #aa0000);
@include gen-window("green", #00aa00);

$macros-list-height: 200px;

// Widget Positions
.macros-master,
.macros-list,
.time-countdown,
.time-clock,
.state-servers,
.state-video-norm,
.state-tally,
.state-data,
.obs-scenes,
.tabs-section,
.transition-rate,
.transition-bar,
.audio-section,
.settings-section {
  position: absolute;
  height: col-height(3);
  top: y-pos(0);
  left: x-pos(0);
}

.macros-master {
  position: absolute;
  top: y-pos(3);
  left: x-pos(0);
  height: col-height(14);
  width: col-width(9);
}

.macros-list {
  position: absolute;
  height: col-height(7);
  top: y-pos(17);
  left: 0;
  right: 0;

  .macro-list-column {
    height: 100%;
    width: col-width(3);
    position: absolute;

    @for $i from 1 through $grid-columns + 1 {
      &:nth-child(#{$i}) {
        left: x-pos(($i - 1) * 3);
      }
    }
  }
}

.tabs-section {
  left: x-pos(12);
  width: col-width(5);
  height: col-height(3);
}

.time-clock {
  left: x-pos(0);
  width: col-width(5.5);
  height: col-height(3);
}

.time-countdown {
  left: x-pos(5.5);
  width: col-width(6.5);
  height: col-height(3);
}

.transition-rate {
  left: x-pos(17);
  top: y-pos(0);
  width: col-width(4);
  height: col-height(8);
}

.transition-bar {
  left: x-pos(20.5);
  top: y-pos(8);
  width: col-width(0.5);
  height: col-height(9);
}

.audio-section {
  top: y-pos(8);
  left: x-pos(17);
  height: col-height(9);
  width: col-width(3.5);
}

.state-servers,
.state-video-norm,
.state-tally,
.state-data {
  left: x-pos(21);
  width: col-width(3);
}

.settings-section {
  top: y-pos(0);
  left: x-pos(17);
  width: col-width(4);
}

.state-servers {
  top: y-pos(0);
  height: col-height(6.25);
}
.state-video-norm {
  top: y-pos(6.25);
  height: col-height(4);
}
.state-data {
  top: y-pos(10.25);
  height: col-height(6.75);
}
.obs-scenes {
  top: y-pos(3);
  left: x-pos(9);
  width: col-width(8);
  height: col-height(14);
}

// Styling

.desk .transition-state {
  width: 100%;
  height: 100%;
  margin: 0;
  border: 0;
  padding: 5px;
}

.banner {
  position: absolute;
  bottom: 30px;
  right: 30px;
  left: 30px;
  background-color: rgba(black, 0.8);
  padding: 20px;
  z-index: 100;
  border-radius: 5px;
  box-shadow: 0 0 10px 0 black, 0 0 0 1000px rgba(black, 0.7);
  display: flex;
  font-size: 26px;
  font-weight: bolder;

  &.banner-red {
    border: 1px solid #dd0000;
    .banner-icon {
      color: #dd0000;
    }
    .banner-text {
      color: #aaa;
    }
  }

  &.banner-yellow {
    border: 1px solid #ffdd00;
    background-color: rgba(black, 1);
    box-shadow: 0 0 10px 0 black, 0 0 40px 30px rgba(black, 0.9);
    bottom: 30px;
    right: 30px;
    left: auto;

    .banner-icon {
      color: #ffdd00;
    }
    .banner-text {
      color: #aaa;
    }
  }

  .banner-icon {
    font-size: 40px;
    margin: -10px 10px;
    padding-right: 10px;
  }
}

.toast {
  position: absolute;
  top: 15px;
  left: 15px;
  background-color: rgba(black, 0.8);
  padding: 10px 20px;
  z-index: 100;
  border-radius: 5px;
  box-shadow: 0 0 10px 0 black;
  font-size: 20px;
  font-weight: bolder;

  -webkit-animation: toast 3s; /* Safari, Chrome and Opera > 12.1 */
  -moz-animation: toast 3s; /* Firefox < 16 */
  -ms-animation: toast 3s; /* Internet Explorer */
  -o-animation: toast 3s; /* Opera < 12.1 */
  animation: toast 3s;

  &.toast-green {
    border: 2px solid #008800;
    background-color: darken(#00aa00, 20%);
  }

  &.toast-yellow {
    border: 2px solid #008800;
    background-color: darken(#00aa00, 20%);
  }

  &.toast-red {
    border: 2px solid #008800;
    background-color: darken(#00aa00, 20%);
  }
}

@keyframes toast {
  0% {
    left: -100px;
    opacity: 0;
  }
  25% {
    left: 15px;
    opacity: 1;
  }
  75% {
    left: 15px;
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}
